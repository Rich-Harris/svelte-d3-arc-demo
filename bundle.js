!function(){"use strict";function t(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function n(){return new t}function e(t){return t>1?0:t<-1?$:Math.acos(t)}function i(t){return t>=1?tt:t<=-1?-tt:Math.asin(t)}function o(t){return t.innerRadius}function r(t){return t.outerRadius}function s(t){return t.startAngle}function a(t){return t.endAngle}function h(t){return t&&t.padAngle}function c(t,n,e,i,o,r,s,a){var h=e-t,c=i-n,u=s-o,l=a-r,_=(u*(n-r)-l*(t-o))/(l*h-u*c);return[t+_*h,n+_*c]}function u(t,n,e,i,o,r,s){var a=t-e,h=n-i,c=(s?r:-r)/X(a*a+h*h),u=c*h,l=-c*a,_=t+u,f=n+l,p=e+u,y=i+l,x=(_+p)/2,v=(f+y)/2,d=p-_,g=y-f,m=d*d+g*g,b=o-r,M=_*y-p*f,T=(g<0?-1:1)*X(U(0,b*b*m-M*M)),w=(M*g-d*T)/m,A=(-M*d-g*T)/m,N=(M*g+d*T)/m,P=(-M*d+g*T)/m,E=w-x,j=A-v,z=N-x,C=P-v;return E*E+j*j>z*z+C*C&&(w=N,A=P),{cx:w,cy:A,x01:-u,y01:-l,x11:w*(o/b-1),y11:A*(o/b-1)}}function l(t){this._context=t}function _(t){return t<0?-1:1}function f(t,n,e){var i=t._x1-t._x0,o=n-t._x1,r=(t._y1-t._y0)/(i||o<0&&-0),s=(e-t._y1)/(o||i<0&&-0),a=(r*o+s*i)/(i+o);return(_(r)+_(s))*Math.min(Math.abs(r),Math.abs(s),.5*Math.abs(a))||0}function p(t,n){var e=t._x1-t._x0;return e?(3*(t._y1-t._y0)/e-n)/2:n}function y(t,n,e){var i=t._x0,o=t._y0,r=t._x1,s=t._y1,a=(r-i)/3;t._context.bezierCurveTo(i+a,o+a*n,r-a,s-a*e,r,s)}function x(t){this._context=t}function v(t){this._context=new d(t)}function d(t){this._context=t}function g(t,n){n.appendChild(t)}function m(t,n,e){n.insertBefore(t,e)}function b(t){t.parentNode.removeChild(t)}function M(t,n,e){for(var i=e||0;i<t.length;i+=1)t[i].teardown(n)}function T(t){return document.createElement(t)}function w(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function A(t){return document.createTextNode(t)}function N(){return document.createComment("")}function P(t,n,e){t.addEventListener(n,e,!1)}function E(t,n,e){t.removeEventListener(n,e,!1)}function j(t,n,e){t.setAttribute(n,e)}function z(t){return t?this._state[t]:this._state}function C(t,n){var e=this,i=t in this._handlers&&this._handlers[t].slice();if(i)for(var o=0;o<i.length;o+=1)i[o].call(e,n)}function k(t,n,e){var i=e&&e.defer?this._observers.pre:this._observers.post;return(i[t]||(i[t]=[])).push(n),e&&e.init===!1||(n.__calling=!0,n.call(this,this._state[t]),n.__calling=!1),{cancel:function(){var e=i[t].indexOf(n);~e&&i[t].splice(e,1)}}}function O(t,n){var e=this._handlers[t]||(this._handlers[t]=[]);return e.push(n),{cancel:function(){var t=e.indexOf(n);~t&&e.splice(t,1)}}}function R(t){this._set(t),(this._root||this)._flush()}function L(){var t=this;if(this._renderHooks)for(;this._renderHooks.length;){var n=t._renderHooks.pop();n.fn.call(n.context)}}function S(t,n,e,i){for(var o in n)if(o in e){var r=e[o],s=i[o];if(r!==s||"object"==typeof r){var a=n[o];if(a)for(var h=0;h<a.length;h+=1){var c=a[h];c.__calling||(c.__calling=!0,c.call(t,r,s),c.__calling=!1)}}}}function I(t,n,e,i){(i||"segments"in n&&"object"==typeof t.segments||t.segments!==e.segments||"angle"in n&&"object"==typeof t.angle||t.angle!==e.angle)&&(t.arcs=n.arcs=it.computed.arcs(t.segments,t.angle))}function q(t,n){function e(){l=!0,n._set({angle:u.value}),l=!1}var i=w("svg");j(i,"svelte-2978995083",""),j(i,"viewBox","0 0 100 100");var o=w("g");j(o,"svelte-2978995083",""),j(o,"transform","translate(50,50)"),g(o,i);var r=N();g(r,o);for(var s=t.arcs,a=[],h=0;h<s.length;h+=1)a[h]=H(t,s,s[h],h,n),a[h].mount(r.parentNode,r);var c=A("\n\n"),u=T("input");j(u,"svelte-2978995083","");var l=!1;P(u,"input",e),u.type="range",u.min="0";var _=2*("Math"in t?t.Math:Math).PI;return u.max=_,u.step="0.01",u.value=t.angle,{mount:function(t,n){m(i,t,n),m(c,t,n),m(u,t,n)},update:function(t,e){for(var i,o=e.arcs,s=0;s<o.length;s+=1)a[s]?a[s].update(t,e,o,o[s],s):(a[s]=H(e,o,o[s],s,n),a[s].mount(r.parentNode,r));M(a,!0,o.length),a.length=o.length,l||(u.value=e.angle),(i=2*("Math"in e?e.Math:Math).PI)!==_&&(_=i,u.max=_)},teardown:function(t){M(a,!1),E(u,"input",e),t&&(b(i),b(c),b(u))}}}function H(t,n,e,i,o){var r=w("path");j(r,"svelte-2978995083","");var s=e.d;j(r,"d",s);var a=e.color;j(r,"fill",a);var h=w("text");j(h,"svelte-2978995083",""),j(h,"class","outline");var c=e.centroid[0];j(h,"x",c);var u=e.centroid[1];j(h,"y",u);var l=e.label,_=A(l);g(_,h);var f=w("text");j(f,"svelte-2978995083","");var p=e.centroid[0];j(f,"x",p);var y=e.centroid[1];j(f,"y",y);var x=e.label,v=A(x);return g(v,f),{mount:function(t,n){m(r,t,n),m(h,t,n),m(f,t,n)},update:function(t,n,e,i,o){var d;(d=i.d)!==s&&(s=d,j(r,"d",s)),(d=i.color)!==a&&(a=d,j(r,"fill",a)),(d=i.centroid[0])!==c&&(c=d,j(h,"x",c)),(d=i.centroid[1])!==u&&(u=d,j(h,"y",u)),(d=i.label)!==l&&(_.data=l=d),(d=i.centroid[0])!==p&&(p=d,j(f,"x",p)),(d=i.centroid[1])!==y&&(y=d,j(f,"y",y)),(d=i.label)!==x&&(v.data=x=d)},teardown:function(t){t&&(b(r),b(h),b(f))}}}function B(t){t=t||{},this._state=Object.assign(it.data(),t.data),I(this._state,this._state,{},!0),this._observers={pre:Object.create(null),post:Object.create(null)},this._handlers=Object.create(null),this._root=t._root,this._yield=t._yield,this._torndown=!1,this._fragment=q(this._state,this),t.target&&this._fragment.mount(t.target,null)}var Z=Math.PI,Q=2*Z,D=Q-1e-6;t.prototype=n.prototype={constructor:t,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,e,i){this._+="Q"+ +t+","+ +n+","+(this._x1=+e)+","+(this._y1=+i)},bezierCurveTo:function(t,n,e,i,o,r){this._+="C"+ +t+","+ +n+","+ +e+","+ +i+","+(this._x1=+o)+","+(this._y1=+r)},arcTo:function(t,n,e,i,o){t=+t,n=+n,e=+e,i=+i,o=+o;var r=this._x1,s=this._y1,a=e-t,h=i-n,c=r-t,u=s-n,l=c*c+u*u;if(o<0)throw new Error("negative radius: "+o);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(l>1e-6)if(Math.abs(u*a-h*c)>1e-6&&o){var _=e-r,f=i-s,p=a*a+h*h,y=_*_+f*f,x=Math.sqrt(p),v=Math.sqrt(l),d=o*Math.tan((Z-Math.acos((p+l-y)/(2*x*v)))/2),g=d/v,m=d/x;Math.abs(g-1)>1e-6&&(this._+="L"+(t+g*c)+","+(n+g*u)),this._+="A"+o+","+o+",0,0,"+ +(u*_>c*f)+","+(this._x1=t+m*a)+","+(this._y1=n+m*h)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,e,i,o,r){t=+t,n=+n,e=+e;var s=e*Math.cos(i),a=e*Math.sin(i),h=t+s,c=n+a,u=1^r,l=r?i-o:o-i;if(e<0)throw new Error("negative radius: "+e);null===this._x1?this._+="M"+h+","+c:(Math.abs(this._x1-h)>1e-6||Math.abs(this._y1-c)>1e-6)&&(this._+="L"+h+","+c),e&&(l<0&&(l=l%Q+Q),l>D?this._+="A"+e+","+e+",0,1,"+u+","+(t-s)+","+(n-a)+"A"+e+","+e+",0,1,"+u+","+(this._x1=h)+","+(this._y1=c):l>1e-6&&(this._+="A"+e+","+e+",0,"+ +(l>=Z)+","+u+","+(this._x1=t+e*Math.cos(o))+","+(this._y1=n+e*Math.sin(o))))},rect:function(t,n,e,i){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +e+"v"+ +i+"h"+-e+"Z"},toString:function(){return this._}};var F=function(t){return function(){return t}},G=Math.abs,J=Math.atan2,K=Math.cos,U=Math.max,V=Math.min,W=Math.sin,X=Math.sqrt,Y=1e-12,$=Math.PI,tt=$/2,nt=2*$,et=function(){function t(){var t,o,r=+l.apply(this,arguments),s=+_.apply(this,arguments),a=y.apply(this,arguments)-tt,h=x.apply(this,arguments)-tt,g=G(h-a),m=h>a;if(d||(d=t=n()),s<r&&(o=s,s=r,r=o),s>Y)if(g>nt-Y)d.moveTo(s*K(a),s*W(a)),d.arc(0,0,s,a,h,!m),r>Y&&(d.moveTo(r*K(h),r*W(h)),d.arc(0,0,r,h,a,m));else{var b,M,T=a,w=h,A=a,N=h,P=g,E=g,j=v.apply(this,arguments)/2,z=j>Y&&(p?+p.apply(this,arguments):X(r*r+s*s)),C=V(G(s-r)/2,+f.apply(this,arguments)),k=C,O=C;if(z>Y){var R=i(z/r*W(j)),L=i(z/s*W(j));(P-=2*R)>Y?(R*=m?1:-1,A+=R,N-=R):(P=0,A=N=(a+h)/2),(E-=2*L)>Y?(L*=m?1:-1,T+=L,w-=L):(E=0,T=w=(a+h)/2)}var S=s*K(T),I=s*W(T),q=r*K(N),H=r*W(N);if(C>Y){var B=s*K(w),Z=s*W(w),Q=r*K(A),D=r*W(A);if(g<$){var F=P>Y?c(S,I,Q,D,B,Z,q,H):[q,H],U=S-F[0],et=I-F[1],it=B-F[0],ot=Z-F[1],rt=1/W(e((U*it+et*ot)/(X(U*U+et*et)*X(it*it+ot*ot)))/2),st=X(F[0]*F[0]+F[1]*F[1]);k=V(C,(r-st)/(rt-1)),O=V(C,(s-st)/(rt+1))}}E>Y?O>Y?(b=u(Q,D,S,I,s,O,m),M=u(B,Z,q,H,s,O,m),d.moveTo(b.cx+b.x01,b.cy+b.y01),O<C?d.arc(b.cx,b.cy,O,J(b.y01,b.x01),J(M.y01,M.x01),!m):(d.arc(b.cx,b.cy,O,J(b.y01,b.x01),J(b.y11,b.x11),!m),d.arc(0,0,s,J(b.cy+b.y11,b.cx+b.x11),J(M.cy+M.y11,M.cx+M.x11),!m),d.arc(M.cx,M.cy,O,J(M.y11,M.x11),J(M.y01,M.x01),!m))):(d.moveTo(S,I),d.arc(0,0,s,T,w,!m)):d.moveTo(S,I),r>Y&&P>Y?k>Y?(b=u(q,H,B,Z,r,-k,m),M=u(S,I,Q,D,r,-k,m),d.lineTo(b.cx+b.x01,b.cy+b.y01),k<C?d.arc(b.cx,b.cy,k,J(b.y01,b.x01),J(M.y01,M.x01),!m):(d.arc(b.cx,b.cy,k,J(b.y01,b.x01),J(b.y11,b.x11),!m),d.arc(0,0,r,J(b.cy+b.y11,b.cx+b.x11),J(M.cy+M.y11,M.cx+M.x11),m),d.arc(M.cx,M.cy,k,J(M.y11,M.x11),J(M.y01,M.x01),!m))):d.arc(0,0,r,N,A,m):d.lineTo(q,H)}else d.moveTo(0,0);if(d.closePath(),t)return d=null,t+""||null}var l=o,_=r,f=F(0),p=null,y=s,x=a,v=h,d=null;return t.centroid=function(){var t=(+l.apply(this,arguments)+ +_.apply(this,arguments))/2,n=(+y.apply(this,arguments)+ +x.apply(this,arguments))/2-$/2;return[K(n)*t,W(n)*t]},t.innerRadius=function(n){return arguments.length?(l="function"==typeof n?n:F(+n),t):l},t.outerRadius=function(n){return arguments.length?(_="function"==typeof n?n:F(+n),t):_},t.cornerRadius=function(n){return arguments.length?(f="function"==typeof n?n:F(+n),t):f},t.padRadius=function(n){return arguments.length?(p=null==n?null:"function"==typeof n?n:F(+n),t):p},t.startAngle=function(n){return arguments.length?(y="function"==typeof n?n:F(+n),t):y},t.endAngle=function(n){return arguments.length?(x="function"==typeof n?n:F(+n),t):x},t.padAngle=function(n){return arguments.length?(v="function"==typeof n?n:F(+n),t):v},t.context=function(n){return arguments.length?(d=null==n?null:n,t):d},t};l.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){switch(t=+t,n=+n,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;default:this._context.lineTo(t,n)}}};x.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:y(this,this._t0,p(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var e=NaN;if(t=+t,n=+n,t!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,y(this,p(this,e=f(this,t,n)),e);break;default:y(this,this._t0,e=f(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=e}}},(v.prototype=Object.create(x.prototype)).point=function(t,n){x.prototype.point.call(this,n,t)},d.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,e,i,o,r){this._context.bezierCurveTo(n,t,i,e,r,o)}};var it=function(){return{data:function(){return{angle:2*Math.PI}},computed:{arcs:function(t,n){var e=t.reduce(function(t,n){return t+n.size},0),i=et(),o=0;return t.map(function(t){var r={innerRadius:20,outerRadius:40,startAngle:o,endAngle:o+=n*t.size/e};return{color:t.color,label:t.label,d:i(r),centroid:i.centroid(r)}})}}}}();B.prototype.get=z,B.prototype.fire=C,B.prototype.observe=k,B.prototype.on=O,B.prototype.set=R,B.prototype._flush=L,B.prototype._set=function(t){var n=this._state;this._state=Object.assign({},n,t),I(this._state,t,n,!1),S(this,this._observers.pre,t,n),this._fragment&&this._fragment.update(t,this._state),S(this,this._observers.post,t,n)},B.prototype.teardown=B.prototype.destroy=function(t){this.fire("teardown"),this._fragment.teardown(t!==!1),this._fragment=null,this._state={},this._torndown=!0};var ot=[{size:5,label:"this thing",color:"rgb(100,180,200)"},{size:8,label:"that thing",color:"rgb(150,200,250)"},{size:11,label:"another thing",color:"rgb(80,100,150)"}],rt={segments:ot};document.body.innerHTML="",new B({target:document.body,data:rt})}();

!function(){"use strict";function t(){}function n(t,n){for(var i in n)t[i]=n[i];return t}function i(t,n){n.appendChild(t)}function e(t,n,i){n.insertBefore(t,i)}function r(t){t.parentNode.removeChild(t)}function s(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function o(t){return document.createTextNode(t)}function a(t,n,i){t.addEventListener(n,i,!1)}function c(t,n,i){t.removeEventListener(n,i,!1)}function h(t,n,i){t.setAttribute(n,i)}function u(t,n){t._handlers=Object.create(null),t._bind=n._bind,t.options=n,t.root=n.root||t,t.store=t.root.store||n.store}function l(t){for(;t&&t.length;)t.shift()()}var _={destroy:function(n){this.destroy=t,this.fire("destroy"),this.set=t,this._fragment.d(!1!==n),this._fragment=null,this._state={}},get:function(){return this._state},fire:function(t,n){var i=t in this._handlers&&this._handlers[t].slice();if(i)for(var e=0;e<i.length;e+=1){var r=i[e];r.__calling||(r.__calling=!0,r.call(this,n),r.__calling=!1)}},on:function(t,n){var i=this._handlers[t]||(this._handlers[t]=[]);return i.push(n),{cancel:function(){var t=i.indexOf(n);~t&&i.splice(t,1)}}},set:function(t){this._set(n({},t)),this.root._lock||(this.root._lock=!0,l(this.root._beforecreate),l(this.root._oncreate),l(this.root._aftercreate),this.root._lock=!1)},_recompute:t,_set:function(t){var i=this._state,e={},r=!1;for(var s in t)this._differs(t[s],i[s])&&(e[s]=r=!0);r&&(this._state=n(n({},i),t),this._recompute(e,this._state),this._bind&&this._bind(e,this._state),this._fragment&&(this.fire("state",{changed:e,current:this._state,previous:i}),this._fragment.p(e,this._state),this.fire("update",{changed:e,current:this._state,previous:i})))},_mount:function(t,n){this._fragment[this._fragment.i?"i":"m"](t,n||null)},_differs:function(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}},f=Math.PI,y=2*f,x=y-1e-6;function p(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function d(){return new p}function v(t){return function(){return t}}p.prototype=d.prototype={constructor:p,moveTo:function(t,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,n){this._+="L"+(this._x1=+t)+","+(this._y1=+n)},quadraticCurveTo:function(t,n,i,e){this._+="Q"+ +t+","+ +n+","+(this._x1=+i)+","+(this._y1=+e)},bezierCurveTo:function(t,n,i,e,r,s){this._+="C"+ +t+","+ +n+","+ +i+","+ +e+","+(this._x1=+r)+","+(this._y1=+s)},arcTo:function(t,n,i,e,r){t=+t,n=+n,i=+i,e=+e,r=+r;var s=this._x1,o=this._y1,a=i-t,c=e-n,h=s-t,u=o-n,l=h*h+u*u;if(r<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=n);else if(l>1e-6)if(Math.abs(u*a-c*h)>1e-6&&r){var _=i-s,y=e-o,x=a*a+c*c,p=_*_+y*y,d=Math.sqrt(x),v=Math.sqrt(l),g=r*Math.tan((f-Math.acos((x+l-p)/(2*d*v)))/2),m=g/v,b=g/d;Math.abs(m-1)>1e-6&&(this._+="L"+(t+m*h)+","+(n+m*u)),this._+="A"+r+","+r+",0,0,"+ +(u*_>h*y)+","+(this._x1=t+b*a)+","+(this._y1=n+b*c)}else this._+="L"+(this._x1=t)+","+(this._y1=n);else;},arc:function(t,n,i,e,r,s){t=+t,n=+n;var o=(i=+i)*Math.cos(e),a=i*Math.sin(e),c=t+o,h=n+a,u=1^s,l=s?e-r:r-e;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+c+","+h:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-h)>1e-6)&&(this._+="L"+c+","+h),i&&(l<0&&(l=l%y+y),l>x?this._+="A"+i+","+i+",0,1,"+u+","+(t-o)+","+(n-a)+"A"+i+","+i+",0,1,"+u+","+(this._x1=c)+","+(this._y1=h):l>1e-6&&(this._+="A"+i+","+i+",0,"+ +(l>=f)+","+u+","+(this._x1=t+i*Math.cos(r))+","+(this._y1=n+i*Math.sin(r))))},rect:function(t,n,i,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+n)+"h"+ +i+"v"+ +e+"h"+-i+"Z"},toString:function(){return this._}};var g=Math.abs,m=Math.atan2,b=Math.cos,M=Math.max,T=Math.min,w=Math.sin,A=Math.sqrt,N=1e-12,P=Math.PI,z=P/2,C=2*P;function E(t){return t>=1?z:t<=-1?-z:Math.asin(t)}function R(t){return t.innerRadius}function k(t){return t.outerRadius}function L(t){return t.startAngle}function I(t){return t.endAngle}function j(t){return t&&t.padAngle}function q(t,n,i,e,r,s,o){var a=t-i,c=n-e,h=(o?s:-s)/A(a*a+c*c),u=h*c,l=-h*a,_=t+u,f=n+l,y=i+u,x=e+l,p=(_+y)/2,d=(f+x)/2,v=y-_,g=x-f,m=v*v+g*g,b=r-s,T=_*x-y*f,w=(g<0?-1:1)*A(M(0,b*b*m-T*T)),N=(T*g-v*w)/m,P=(-T*v-g*w)/m,z=(T*g+v*w)/m,C=(-T*v+g*w)/m,E=N-p,R=P-d,k=z-p,L=C-d;return E*E+R*R>k*k+L*L&&(N=z,P=C),{cx:N,cy:P,x01:-u,y01:-l,x11:N*(r/b-1),y11:P*(r/b-1)}}function O(){var t=R,n=k,i=v(0),e=null,r=L,s=I,o=j,a=null;function c(){var c,h,u,l=+t.apply(this,arguments),_=+n.apply(this,arguments),f=r.apply(this,arguments)-z,y=s.apply(this,arguments)-z,x=g(y-f),p=y>f;if(a||(a=c=d()),_<l&&(h=_,_=l,l=h),_>N)if(x>C-N)a.moveTo(_*b(f),_*w(f)),a.arc(0,0,_,f,y,!p),l>N&&(a.moveTo(l*b(y),l*w(y)),a.arc(0,0,l,y,f,p));else{var v,M,R=f,k=y,L=f,I=y,j=x,O=x,S=o.apply(this,arguments)/2,B=S>N&&(e?+e.apply(this,arguments):A(l*l+_*_)),Z=T(g(_-l)/2,+i.apply(this,arguments)),H=Z,Q=Z;if(B>N){var D=E(B/l*w(S)),F=E(B/_*w(S));(j-=2*D)>N?(L+=D*=p?1:-1,I-=D):(j=0,L=I=(f+y)/2),(O-=2*F)>N?(R+=F*=p?1:-1,k-=F):(O=0,R=k=(f+y)/2)}var G=_*b(R),J=_*w(R),K=l*b(I),U=l*w(I);if(Z>N){var V=_*b(k),W=_*w(k),X=l*b(L),Y=l*w(L);if(x<P){var $=j>N?function(t,n,i,e,r,s,o,a){var c=i-t,h=e-n,u=o-r,l=a-s,_=(u*(n-s)-l*(t-r))/(l*c-u*h);return[t+_*c,n+_*h]}(G,J,X,Y,V,W,K,U):[K,U],tt=G-$[0],nt=J-$[1],it=V-$[0],et=W-$[1],rt=1/w(((u=(tt*it+nt*et)/(A(tt*tt+nt*nt)*A(it*it+et*et)))>1?0:u<-1?P:Math.acos(u))/2),st=A($[0]*$[0]+$[1]*$[1]);H=T(Z,(l-st)/(rt-1)),Q=T(Z,(_-st)/(rt+1))}}O>N?Q>N?(v=q(X,Y,G,J,_,Q,p),M=q(V,W,K,U,_,Q,p),a.moveTo(v.cx+v.x01,v.cy+v.y01),Q<Z?a.arc(v.cx,v.cy,Q,m(v.y01,v.x01),m(M.y01,M.x01),!p):(a.arc(v.cx,v.cy,Q,m(v.y01,v.x01),m(v.y11,v.x11),!p),a.arc(0,0,_,m(v.cy+v.y11,v.cx+v.x11),m(M.cy+M.y11,M.cx+M.x11),!p),a.arc(M.cx,M.cy,Q,m(M.y11,M.x11),m(M.y01,M.x01),!p))):(a.moveTo(G,J),a.arc(0,0,_,R,k,!p)):a.moveTo(G,J),l>N&&j>N?H>N?(v=q(K,U,V,W,l,-H,p),M=q(G,J,X,Y,l,-H,p),a.lineTo(v.cx+v.x01,v.cy+v.y01),H<Z?a.arc(v.cx,v.cy,H,m(v.y01,v.x01),m(M.y01,M.x01),!p):(a.arc(v.cx,v.cy,H,m(v.y01,v.x01),m(v.y11,v.x11),!p),a.arc(0,0,l,m(v.cy+v.y11,v.cx+v.x11),m(M.cy+M.y11,M.cx+M.x11),p),a.arc(M.cx,M.cy,H,m(M.y11,M.x11),m(M.y01,M.x01),!p))):a.arc(0,0,l,I,L,p):a.lineTo(K,U)}else a.moveTo(0,0);if(a.closePath(),c)return a=null,c+""||null}return c.centroid=function(){var i=(+t.apply(this,arguments)+ +n.apply(this,arguments))/2,e=(+r.apply(this,arguments)+ +s.apply(this,arguments))/2-P/2;return[b(e)*i,w(e)*i]},c.innerRadius=function(n){return arguments.length?(t="function"==typeof n?n:v(+n),c):t},c.outerRadius=function(t){return arguments.length?(n="function"==typeof t?t:v(+t),c):n},c.cornerRadius=function(t){return arguments.length?(i="function"==typeof t?t:v(+t),c):i},c.padRadius=function(t){return arguments.length?(e=null==t?null:"function"==typeof t?t:v(+t),c):e},c.startAngle=function(t){return arguments.length?(r="function"==typeof t?t:v(+t),c):r},c.endAngle=function(t){return arguments.length?(s="function"==typeof t?t:v(+t),c):s},c.padAngle=function(t){return arguments.length?(o="function"==typeof t?t:v(+t),c):o},c.context=function(t){return arguments.length?(a=null==t?null:t,c):a},c}function S(t){return t<0?-1:1}function B(t,n,i){var e=t._x1-t._x0,r=n-t._x1,s=(t._y1-t._y0)/(e||r<0&&-0),o=(i-t._y1)/(r||e<0&&-0),a=(s*r+o*e)/(e+r);return(S(s)+S(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function Z(t,n){var i=t._x1-t._x0;return i?(3*(t._y1-t._y0)/i-n)/2:n}function H(t,n,i){var e=t._x0,r=t._y0,s=t._x1,o=t._y1,a=(s-e)/3;t._context.bezierCurveTo(e+a,r+a*n,s-a,o-a*i,s,o)}function Q(t){this._context=t}function D(t){this._context=t}function F(t,n){for(var u,l,_,f,y,x=n.arcs,p=[],d=0;d<x.length;d+=1)p[d]=G(t,J(n,x,d));function v(){var n;t.set({angle:(n=f.value,""===n?void 0:+n)})}return{c:function(){u=s("svg"),l=s("g");for(var t=0;t<p.length;t+=1)p[t].c();var i;_=o("\n\n"),i="input",f=document.createElement(i),h(l,"transform","translate(50,50)"),h(u,"viewBox","0 0 100 100"),h(u,"class","svelte-1563cw7"),a(f,"change",v),a(f,"input",v),h(f,"type","range"),f.min="0",f.max=y=2*n.Math.PI,f.step="0.01",f.className="svelte-1563cw7"},m:function(t,r){e(u,t,r),i(l,u);for(var s=0;s<p.length;s+=1)p[s].m(l,null);e(_,t,r),e(f,t,r),f.value=n.angle},p:function(n,i){if(n.arcs){x=i.arcs;for(var e=0;e<x.length;e+=1){var r=J(i,x,e);p[e]?p[e].p(n,r):(p[e]=G(t,r),p[e].c(),p[e].m(l,null))}for(;e<p.length;e+=1)p[e].d(1);p.length=x.length}f.value=i.angle,n.Math&&y!==(y=2*i.Math.PI)&&(f.max=y)},d:function(t){t&&r(u),function(t,n){for(var i=0;i<t.length;i+=1)t[i]&&t[i].d(n)}(p,t),t&&(r(_),r(f)),c(f,"change",v),c(f,"input",v)}}}function G(t,n){var a,c,u,l,_,f,y,x,p,d,v,g=n.arc.label,m=n.arc.label;return{c:function(){a=s("path"),l=s("text"),_=o(g),x=s("text"),p=o(m),h(a,"d",c=n.arc.d),h(a,"fill",u=n.arc.color),h(a,"class","svelte-1563cw7"),h(l,"class","outline svelte-1563cw7"),h(l,"x",f=n.arc.centroid[0]),h(l,"y",y=n.arc.centroid[1]),h(x,"x",d=n.arc.centroid[0]),h(x,"y",v=n.arc.centroid[1]),h(x,"class","svelte-1563cw7")},m:function(t,n){e(a,t,n),e(l,t,n),i(_,l),e(x,t,n),i(p,x)},p:function(t,n){t.arcs&&c!==(c=n.arc.d)&&h(a,"d",c),t.arcs&&u!==(u=n.arc.color)&&h(a,"fill",u),t.arcs&&g!==(g=n.arc.label)&&(_.data=g),t.arcs&&f!==(f=n.arc.centroid[0])&&h(l,"x",f),t.arcs&&y!==(y=n.arc.centroid[1])&&h(l,"y",y),t.arcs&&m!==(m=n.arc.label)&&(p.data=m),t.arcs&&d!==(d=n.arc.centroid[0])&&h(x,"x",d),t.arcs&&v!==(v=n.arc.centroid[1])&&h(x,"y",v)},d:function(t){t&&(r(a),r(l),r(x))}}}function J(t,n,i){var e=Object.create(t);return e.arc=n[i],e.each_value=n,e.arc_index=i,e}function K(t){u(this,t),this._state=n(n({Math:Math},{angle:2*Math.PI}),t.data),this._recompute({segments:1,angle:1},this._state),this._fragment=F(this,this._state),t.target&&(this._fragment.c(),this._mount(t.target,t.anchor))}Q.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:H(this,this._t0,Z(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,n){var i=NaN;if(n=+n,(t=+t)!==this._x1||n!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break;case 1:this._point=2;break;case 2:this._point=3,H(this,Z(this,i=B(this,t,n)),i);break;default:H(this,this._t0,i=B(this,t,n))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=n,this._t0=i}}},(function(t){this._context=new D(t)}.prototype=Object.create(Q.prototype)).point=function(t,n){Q.prototype.point.call(this,n,t)},D.prototype={moveTo:function(t,n){this._context.moveTo(n,t)},closePath:function(){this._context.closePath()},lineTo:function(t,n){this._context.lineTo(n,t)},bezierCurveTo:function(t,n,i,e,r,s){this._context.bezierCurveTo(n,t,e,i,s,r)}},n(K.prototype,_),K.prototype._recompute=function(t,n){var i,e,r,s,o,a;(t.segments||t.angle)&&this._differs(n.arcs,n.arcs=(e=(i=n).segments,r=i.angle,s=e.reduce(function(t,n){return t+n.size},0),o=O(),a=0,e.map(function(t){var n={innerRadius:20,outerRadius:40,startAngle:a,endAngle:a+=r*t.size/s};return{color:t.color,label:t.label,d:o(n),centroid:o.centroid(n)}})))&&(t.arcs=!0)};var U={segments:[{size:5,label:"this thing",color:"rgb(100,180,200)"},{size:8,label:"that thing",color:"rgb(150,200,250)"},{size:11,label:"another thing",color:"rgb(80,100,150)"}]};document.body.innerHTML="",new K({target:document.body,data:U})}();
